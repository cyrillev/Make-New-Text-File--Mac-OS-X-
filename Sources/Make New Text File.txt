-- Scott Haneda twitter://@cometbus 10/15/2010 11:43:39 PM @cometbus
-- ** I hate AppleScript, I hate the comments, I hate the intedenting, I hate the human like syntax 
-- that mkaes things harder, I hate that I cant do real multi-line comments, and I hate the terribly thought 
-- out implemebtation of integrating shell commands into the language ** --

set DEBUG to false

set now_path to null -- Current directory

-- If there is a Finder window open, store that reference
try
	tell application "Finder" to set now_path to POSIX path of (target of window 1 as alias)
end try

-- No Finder window open? inform the user to fix tha problem
if (now_path = null) then
	-- Looks like there are no windows open, where would we make the file?
	if (DEBUG) then display dialog "Sorry, you did not select a target to make your new text file... dumb ass!"
	return false
else
	-- Looking good, a text file will be made
	if (DEBUG) then display dialog "now_path: " & now_path
	
	-- Set some variables up
	set base_file_name to "A_File" -- Base filename
	set ext to "txt" -- File extension
	set now_date to do shell script ("/bin/date '+%H.%M.%S'") as string -- date to provide uniqueness
	set random_string to (random number from 200 to 999 as integer) -- random string to provide precision beyond one second uniquness
	set file_name to base_file_name & "." & now_date & "." & random_string & "." & ext -- Bring it all together to make a new filename
	if (DEBUG) then display dialog "file_name: " & file_name
	
	-- cd into the direotry of the front most window
	do shell script "cd " & quoted form of now_path & "; /usr/bin/touch " & file_name -- All in one command of the ENV resets apparently
	
	-- Maybe one day I will get this working
	-- Open the file in my favoriate editor
	--  do shell script "/usr/bin/open -a 'textmate' " & file_name
	-- do shell script "open " & quoted form of file_name
end if